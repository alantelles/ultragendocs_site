include @Core.Brook.Server
include @Core.Request

include 'app'


print("Setting context")
docs_toc = Request.get('https://raw.githubusercontent.com/alantelles/ultragendocs_content/main/docs_toc.json')

s = new Server(5000, true)

s.context = {
    'tocs': {
        'docs': JSON.parse(docs_toc.text)
    },
    'pageTitle': 'UltraGen | scripting language | template engine | website machine'
}
s.app = $app
print("Finished")
s.run(true)